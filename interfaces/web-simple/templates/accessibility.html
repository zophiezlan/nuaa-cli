<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Accessibility Settings - NUAA Tools</title>
    <!-- Fluent UI Web Components -->
    <script type="module" src="https://unpkg.com/@fluentui/web-components@2.6.1"></script>

    <link rel="stylesheet" href="/static/css/main.css">
    <style>
        .settings-container {
            max-width: 800px;
            margin: 0 auto;
            padding: 40px 20px;
        }
        .settings-header {
            text-align: center;
            margin-bottom: 40px;
        }
        .setting-card {
            background: white;
            padding: 30px;
            margin-bottom: 20px;
            border-radius: 8px;
            border: 2px solid #ddd;
        }
        .setting-toggle {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin: 20px 0;
        }
        .toggle-switch {
            position: relative;
            width: 60px;
            height: 30px;
        }
        .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }
        .toggle-slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            transition: 0.4s;
            border-radius: 30px;
        }
        .toggle-slider:before {
            position: absolute;
            content: "";
            height: 22px;
            width: 22px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: 0.4s;
            border-radius: 50%;
        }
        input:checked + .toggle-slider {
            background-color: #2c5aa0;
        }
        input:checked + .toggle-slider:before {
            transform: translateX(30px);
        }
        .font-size-controls {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }
        .font-size-btn {
            padding: 10px 20px;
            border: 2px solid #2c5aa0;
            background: white;
            color: #2c5aa0;
            cursor: pointer;
            border-radius: 5px;
            font-weight: bold;
        }
        .font-size-btn.active {
            background: #2c5aa0;
            color: white;
        }
        .color-scheme-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }
        .color-scheme {
            padding: 20px;
            border: 2px solid #ddd;
            border-radius: 8px;
            cursor: pointer;
            text-align: center;
        }
        .color-scheme.active {
            border-color: #2c5aa0;
            background: #e8f4f8;
        }
        .preview-area {
            margin-top: 30px;
            padding: 30px;
            background: #f9f9f9;
            border-radius: 8px;
        }
    </style>
</head>
<body>
    <nav class="top-nav">
        <div class="nav-container">
            <a href="javascript:history.back()" class="nav-back">← Back</a>
        </div>
    </nav>

    <div class="settings-container">
        <header class="settings-header">
            <h1>♿ Accessibility Settings</h1>
            <p>Customize your experience for better accessibility</p>
        </header>

        <div class="setting-card">
            <h2>Visual Settings</h2>

            <div class="setting-toggle">
                <div>
                    <h3>High Contrast Mode</h3>
                    <p>Increases contrast for better visibility</p>
                </div>
                <label class="toggle-switch">
                    <input type="checkbox" id="highContrast" onchange="toggleHighContrast()">
                    <span class="toggle-slider"></span>
                </label>
            </div>

            <div class="setting-toggle">
                <div>
                    <h3>Dark Mode</h3>
                    <p>Reduces eye strain in low-light conditions</p>
                </div>
                <label class="toggle-switch">
                    <input type="checkbox" id="darkMode" onchange="toggleDarkMode()">
                    <span class="toggle-slider"></span>
                </label>
            </div>

            <div class="setting-toggle">
                <div>
                    <h3>Reduce Animations</h3>
                    <p>Minimizes motion for sensitive users</p>
                </div>
                <label class="toggle-switch">
                    <input type="checkbox" id="reduceMotion" onchange="toggleReduceMotion()">
                    <span class="toggle-slider"></span>
                </label>
            </div>

            <div style="margin-top: 30px;">
                <h3>Text Size</h3>
                <p>Choose your preferred text size</p>
                <div class="font-size-controls">
                    <button class="font-size-btn" onclick="setFontSize('small')">A</button>
                    <button class="font-size-btn active" onclick="setFontSize('normal')">A</button>
                    <button class="font-size-btn" onclick="setFontSize('large')">A</button>
                    <button class="font-size-btn" onclick="setFontSize('xlarge')">A</button>
                </div>
            </div>

            <div style="margin-top: 30px;">
                <h3>Color Scheme</h3>
                <p>Select a color scheme that works best for you</p>
                <div class="color-scheme-grid">
                    <div class="color-scheme active" onclick="setColorScheme('default')"
                         style="background: linear-gradient(to bottom, #2c5aa0, white);">
                        <strong>Default</strong>
                    </div>
                    <div class="color-scheme" onclick="setColorScheme('high-contrast')"
                         style="background: linear-gradient(to bottom, #000, #fff);">
                        <strong>High Contrast</strong>
                    </div>
                    <div class="color-scheme" onclick="setColorScheme('warm')"
                         style="background: linear-gradient(to bottom, #ff6b35, #f7931e);">
                        <strong>Warm</strong>
                    </div>
                    <div class="color-scheme" onclick="setColorScheme('cool')"
                         style="background: linear-gradient(to bottom, #0077b6, #00b4d8);">
                        <strong>Cool</strong>
                    </div>
                </div>
            </div>
        </div>

        <div class="setting-card">
            <h2>Input Settings</h2>

            <div class="setting-toggle">
                <div>
                    <h3>Voice Input</h3>
                    <p>Enable voice-to-text for form fields</p>
                </div>
                <label class="toggle-switch">
                    <input type="checkbox" id="voiceInput" onchange="toggleVoiceInput()" checked>
                    <span class="toggle-slider"></span>
                </label>
            </div>

            <div class="setting-toggle">
                <div>
                    <h3>Auto-Save</h3>
                    <p>Automatically save your work every 30 seconds</p>
                </div>
                <label class="toggle-switch">
                    <input type="checkbox" id="autoSave" onchange="toggleAutoSave()" checked>
                    <span class="toggle-slider"></span>
                </label>
            </div>

            <div class="setting-toggle">
                <div>
                    <h3>Keyboard Shortcuts</h3>
                    <p>Enable keyboard shortcuts for faster navigation</p>
                </div>
                <label class="toggle-switch">
                    <input type="checkbox" id="keyboardShortcuts" onchange="toggleKeyboardShortcuts()" checked>
                    <span class="toggle-slider"></span>
                </label>
            </div>
        </div>

        <div class="setting-card">
            <h2>Screen Reader Settings</h2>

            <div class="setting-toggle">
                <div>
                    <h3>Enhanced ARIA Labels</h3>
                    <p>More detailed labels for screen readers</p>
                </div>
                <label class="toggle-switch">
                    <input type="checkbox" id="enhancedAria" onchange="toggleEnhancedAria()" checked>
                    <span class="toggle-slider"></span>
                </label>
            </div>

            <div class="setting-toggle">
                <div>
                    <h3>Skip Navigation Links</h3>
                    <p>Add links to skip to main content</p>
                </div>
                <label class="toggle-switch">
                    <input type="checkbox" id="skipLinks" onchange="toggleSkipLinks()" checked>
                    <span class="toggle-slider"></span>
                </label>
            </div>

            <div class="setting-toggle">
                <div>
                    <h3>Focus Indicators</h3>
                    <p>Show clear outlines around focused elements</p>
                </div>
                <label class="toggle-switch">
                    <input type="checkbox" id="focusIndicators" onchange="toggleFocusIndicators()" checked>
                    <span class="toggle-slider"></span>
                </label>
            </div>
        </div>

        <div class="setting-card">
            <h2>Mobile Settings</h2>

            <div class="setting-toggle">
                <div>
                    <h3>Large Touch Targets</h3>
                    <p>Make buttons easier to tap on mobile</p>
                </div>
                <label class="toggle-switch">
                    <input type="checkbox" id="largeTouchTargets" onchange="toggleLargeTouchTargets()">
                    <span class="toggle-slider"></span>
                </label>
            </div>

            <div class="setting-toggle">
                <div>
                    <h3>Simplified Layout</h3>
                    <p>Use a simpler layout on small screens</p>
                </div>
                <label class="toggle-switch">
                    <input type="checkbox" id="simplifiedLayout" onchange="toggleSimplifiedLayout()">
                    <span class="toggle-slider"></span>
                </label>
            </div>
        </div>

        <div class="preview-area">
            <h2>Preview</h2>
            <p>This is how text will appear with your current settings.</p>
            <button class="btn primary" style="margin-top: 15px;">Sample Button</button>
            <p style="margin-top: 15px;">
                <a href="#">Sample Link</a> |
                <input type="text" placeholder="Sample input field" style="padding: 10px; margin-top: 10px; width: 100%;">
            </p>
        </div>

        <div style="text-align: center; margin: 40px 0;">
            <button class="btn secondary" onclick="resetToDefaults()" style="margin-right: 10px;">
                Reset to Defaults
            </button>
            <button class="btn primary" onclick="saveSettings()">
                Save Settings
            </button>
        </div>

        <div style="background: #fff3cd; padding: 20px; border-radius: 8px; margin-top: 30px; border-left: 4px solid #ffc107;">
            <h3>Accessibility Resources</h3>
            <ul>
                <li><a href="https://www.w3.org/WAI/fundamentals/accessibility-intro/" target="_blank">Web Accessibility Introduction</a></li>
                <li><a href="/help/general">Keyboard Shortcuts Guide</a></li>
                <li><a href="mailto:tech@nuaa.org.au">Report Accessibility Issues</a></li>
            </ul>
        </div>
    </div>

    <script>
        // Load saved settings
        document.addEventListener('DOMContentLoaded', function() {
            loadSettings();
        });

        function loadSettings() {
            const settings = JSON.parse(localStorage.getItem('accessibilitySettings') || '{}');

            Object.entries(settings).forEach(([key, value]) => {
                const element = document.getElementById(key);
                if (element && element.type === 'checkbox') {
                    element.checked = value;
                    // Apply the setting
                    applySettings(key, value);
                }
            });
        }

        function saveSettings() {
            const settings = {
                highContrast: document.getElementById('highContrast').checked,
                darkMode: document.getElementById('darkMode').checked,
                reduceMotion: document.getElementById('reduceMotion').checked,
                voiceInput: document.getElementById('voiceInput').checked,
                autoSave: document.getElementById('autoSave').checked,
                keyboardShortcuts: document.getElementById('keyboardShortcuts').checked,
                enhancedAria: document.getElementById('enhancedAria').checked,
                skipLinks: document.getElementById('skipLinks').checked,
                focusIndicators: document.getElementById('focusIndicators').checked,
                largeTouchTargets: document.getElementById('largeTouchTargets').checked,
                simplifiedLayout: document.getElementById('simplifiedLayout').checked,
                fontSize: currentFontSize,
                colorScheme: currentColorScheme
            };

            localStorage.setItem('accessibilitySettings', JSON.stringify(settings));
            alert('✅ Settings saved successfully!');
        }

        function applySettings(setting, value) {
            switch(setting) {
                case 'highContrast':
                    document.body.classList.toggle('high-contrast', value);
                    break;
                case 'darkMode':
                    document.body.classList.toggle('dark-mode', value);
                    break;
                case 'reduceMotion':
                    document.body.classList.toggle('reduce-motion', value);
                    break;
                case 'largeTouchTargets':
                    document.body.classList.toggle('large-touch-targets', value);
                    break;
                case 'simplifiedLayout':
                    document.body.classList.toggle('simplified-layout', value);
                    break;
                case 'focusIndicators':
                    document.body.classList.toggle('enhanced-focus', value);
                    break;
            }
        }

        function toggleHighContrast() {
            const checked = document.getElementById('highContrast').checked;
            applySettings('highContrast', checked);
        }

        function toggleDarkMode() {
            const checked = document.getElementById('darkMode').checked;
            applySettings('darkMode', checked);
        }

        function toggleReduceMotion() {
            const checked = document.getElementById('reduceMotion').checked;
            applySettings('reduceMotion', checked);
        }

        function toggleVoiceInput() {
            console.log('Voice input toggled');
        }

        function toggleAutoSave() {
            console.log('Auto-save toggled');
        }

        function toggleKeyboardShortcuts() {
            console.log('Keyboard shortcuts toggled');
        }

        function toggleEnhancedAria() {
            console.log('Enhanced ARIA toggled');
        }

        function toggleSkipLinks() {
            console.log('Skip links toggled');
        }

        function toggleFocusIndicators() {
            const checked = document.getElementById('focusIndicators').checked;
            applySettings('focusIndicators', checked);
        }

        function toggleLargeTouchTargets() {
            const checked = document.getElementById('largeTouchTargets').checked;
            applySettings('largeTouchTargets', checked);
        }

        function toggleSimplifiedLayout() {
            const checked = document.getElementById('simplifiedLayout').checked;
            applySettings('simplifiedLayout', checked);
        }

        let currentFontSize = 'normal';
        function setFontSize(size) {
            currentFontSize = size;
            document.querySelectorAll('.font-size-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');

            document.body.classList.remove('font-small', 'font-normal', 'font-large', 'font-xlarge');
            document.body.classList.add('font-' + size);
        }

        let currentColorScheme = 'default';
        function setColorScheme(scheme) {
            currentColorScheme = scheme;
            document.querySelectorAll('.color-scheme').forEach(s => s.classList.remove('active'));
            event.target.classList.add('active');

            document.body.classList.remove('scheme-default', 'scheme-high-contrast', 'scheme-warm', 'scheme-cool');
            document.body.classList.add('scheme-' + scheme);
        }

        function resetToDefaults() {
            if (confirm('Reset all accessibility settings to defaults?')) {
                localStorage.removeItem('accessibilitySettings');
                location.reload();
            }
        }
    </script>
</body>
</html>
